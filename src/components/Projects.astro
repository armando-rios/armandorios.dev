---
import { Icon } from "astro-icon/components";

interface Technology {
  name: string;
  color: string;
}

interface Project {
  title: string;
  description: string;
  image: string;
  link: string;
  github?: string;
  featured: boolean;
  technologies: Technology[];
}

const projects: Project[] = [
  {
    title: "Workshop Manager",
    description:
      "A web-based system for managing inventory, customers, and sales in automotive workshops, ensuring seamless multi-branch access and efficient workflow.",
    image: "/workshop-system.webp",
    link: "https://workshop-manager.demo",
    featured: true,
    technologies: [
      { name: "React", color: "text-cyan-400" },
      { name: "Node.js", color: "text-green-400" },
      { name: "MongoDB", color: "text-yellow-400" },
      { name: "Express.js", color: "text-gray-400" },
    ],
  },
  {
    title: "Task Manager",
    description:
      "A modern web application for task management with customizable themes. ",
    image: "/task-manager.webp",
    link: "https://armando-rios.github.io/task-manager/",
    github: "https://github.com/armando-rios/task-manager",
    featured: true,
    technologies: [
      { name: "JavaScript", color: "text-yellow-" },
      { name: "Webpack", color: "text-green-400" },
      { name: "Tailwindcss", color: "text-blue-400" },
    ],
  },
  {
    title: "Weather App",
    description:
      "A web application that provides real-time weather information for any location.",
    image: "/weather-app.webp",
    link: "https://armando-rios.github.io/weather-app/",
    github: "https://github.com/armando-rios/weather-app",
    featured: true,
    technologies: [
      { name: "JavaScript", color: "text-yellow-" },
      { name: "Webpack", color: "text-green-400" },
      { name: "Tailwindcss", color: "text-blue-400" },
    ],
  },
];
---

<section class="max-w-6xl mx-auto py-28 px-8" id="projects">
  <div class="mb-16 relative flex justify-between">
    <h2 class="text-4xl font-bold mb-6 relative inline-block">
      <span
        class="bg-gradient-to-r from-fuchsia-500 to-cyan-500 text-transparent bg-clip-text"
      >
        FEATURED PROJECTS
      </span>
      <div
        class="absolute -bottom-2 left-0 w-full h-1 bg-gradient-to-r from-fuchsia-500/40 to-cyan-500/40"
      >
      </div>
    </h2>
    <a
      href="/projects"
      class="group flex items-center gap-2 text-sm text-zinc-400 hover:text-white transition-colors duration-300"
    >
      VIEW ALL
      <Icon
        name="arrow-right"
        class="w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-300"
      />
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    {
      projects
        .filter((p) => p.featured)
        .map((project, index) => (
          <article class="group relative">
            {/* Project Card */}
            <div class="relative border-2 border-zinc-800 p-6 h-full transition-all duration-300 hover:border-fuchsia-500/50">
              {/* Decorative Elements */}
              <div class="absolute top-0 right-0 w-24 h-24 border-t-2 border-r-2 border-zinc-800 -mt-2 -mr-2 transition-all duration-300 group-hover:border-fuchsia-500/50" />
              <div class="absolute bottom-0 left-0 w-24 h-24 border-b-2 border-l-2 border-zinc-800 -mb-2 -ml-2 transition-all duration-300 group-hover:border-fuchsia-500/50" />

              {/* Content */}
              <div class="relative z-10">
                {/* Información principal que se desvanece en hover */}
                <div class="transition-opacity duration-300 group-hover:opacity-0">
                  <h3 class="text-2xl font-bold mb-4">{project.title}</h3>
                  <p class="text-zinc-400 mb-6 line-clamp-3">
                    {project.description}
                  </p>

                  {/* Tecnologías */}
                  <div class="flex flex-wrap gap-3 mb-8">
                    {project.technologies.map((tech) => (
                      <span class={`text-sm ${tech.color}`}>{tech.name}</span>
                    ))}
                  </div>
                </div>

                {/* Enlaces: siempre visibles */}
                <div class="relative z-20 flex items-center gap-4">
                  <a
                    href={project.link}
                    target="_blank"
                    class="flex items-center gap-2 text-sm group/link transition-colors duration-300"
                  >
                    <span class="text-zinc-400 group-hover/link:text-white">
                      LIVE DEMO
                    </span>
                    <Icon
                      name="external-link"
                      class="w-4 h-4 text-zinc-400 group-hover/link:text-white transition-colors duration-300"
                    />
                  </a>

                  {project.github && (
                    <a
                      href={project.github}
                      target="_blank"
                      class="flex items-center gap-2 text-sm group/github transition-colors duration-300"
                    >
                      <span class="text-zinc-400 group-hover/github:text-white">
                        SOURCE
                      </span>
                      <Icon
                        name="github"
                        class="w-4 h-4 text-zinc-400 group-hover/github:text-white transition-colors duration-300"
                      />
                    </a>
                  )}
                </div>
              </div>

              {/* Hover Gradient */}
              <div class="absolute inset-0 bg-gradient-to-br from-fuchsia-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none" />
            </div>

            {/* Preview Image Overlay */}
            <div class="absolute inset-0 bg-zinc-900/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none">
              <img
                src={project.image}
                alt={project.title}
                class="w-full h-full object-cover opacity-50"
              />
            </div>
          </article>
        ))
    }
  </div>

  {/* Archive Preview */}
</section>

<style>
  /* Optional: Add a slight rotation on hover */
  article {
    transform: translateZ(0);
    transition: transform 0.3s ease;
  }

  article:hover {
    transform: translateZ(0) rotate(-1deg);
  }

  article {
    animation: float 6s ease-in-out infinite;
  }

  article:nth-child(2) {
    animation-delay: -3s;
  }
</style>
